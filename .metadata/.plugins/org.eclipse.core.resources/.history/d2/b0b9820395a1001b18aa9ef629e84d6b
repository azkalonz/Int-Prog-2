<%@ taglib prefix = "c" uri = "http://java.sun.com/jsp/jstl/core" %>
${test}

<jsp:include page="/WEB-INF/layout/header.jsp"/>

	<c:if test="${user == null}">
		<script>
			if(!window.localStorage['user'])
				window.location = "<%=request.getContextPath()%>/login";
		</script>
	</c:if>
	
    <script>        	
    	if(!"${user}".length){
    		if(!window.localStorage['user'])
    			window.location = "<%=request.getContextPath()%>/login";
    	} else {
    		window.localStorage['user'] = JSON.stringify({
        		employeeID: "${user.employeeID}",
        		lastname: "${user.lastname}",
        		firstname: "${user.firstname}",
        		mi: "${user.mi}",
        		email: "${user.email}",
        		username: "${user.username}",
        		password: "${user.password}",
        	});

        	window.location = "<%=request.getContextPath()%>?page=home";
    	}
    </script>
    
<main>
        <div class="container">
            <jsp:include page="/WEB-INF/layout/nav.jsp" />
            <div class="content">
                 <form action="#" onsubmit="return false;">
	                 <div class="infos">
	                     <span>User ID</span>
	                     <input type="text" disabled>
	                 </div>
	                 <div class="infos">
	                     <span>Lastname</span>
	                     <input type="text">
	                 </div>                    
	                 <div class="infos">
	                     <span>Firstname</span>
	                     <input type="text">
	                 </div>                   
	                 <div class="infos">
	                     <span>Middle Initial</span>
	                     <input type="text">
	                 </div>                   
	                 <div class="infos">
	                     <span>Email</span>
	                     <input type="text">
	                 </div>                   
	                 <div class="infos">
	                     <span>Username</span>
	                     <input type="text">
	                 </div>                   
	                 <div class="infos">
	                     <span>Password</span>
	                     <input type="text">
	                 </div>
	                 <input class="button" type="button" value="Edit">	
                 </form>
            </div>
        </div>
    </main>
    
    <script>
    	const user = JSON.parse(window.localStorage['user']);
    	if(user){
    		$('input[type=button]').attr('onclick',"window.location = '<%= request.getContextPath() %>/employee?id='+user.employeeID");
    		Object.keys(user).map((key,i)=>{
    			$("input:eq("+i+")").val(user[key]);
    			$("input:eq("+i+")").attr('name',key);
    			$("input:eq("+i+")").prop('disabled',true);
    		})
    	}
    </script>
<jsp:include page="/WEB-INF/layout/footer.jsp"/>